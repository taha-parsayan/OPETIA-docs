

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MRI Image Analysis &mdash; OPETIA  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PET Image Analysis" href="PET.html" />
    <link rel="prev" title="Making the data ready" href="dataset.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            OPETIA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="what_is_opetia.html">What is OPETIA?</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataset.html">Making the data ready</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MRI Image Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="PET.html">PET Image Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="ROI.html">Feature extraction</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OPETIA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">MRI Image Analysis</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/structural.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mri-image-analysis">
<h1>MRI Image Analysis<a class="headerlink" href="#mri-image-analysis" title="Link to this heading"></a></h1>
<p><strong>1. Overview:</strong></p>
<p>OPETIA provides a user-friendly interface for the pre-processing of MRI images, which is essential for accurate analysis in multimodal neuroimaging studies. The tool automates the entire process, ensuring that users do not need extensive technical knowledge to perform complex image analyses. However, all the details of the image pre-processing are provided and can be modified by the user if needed.</p>
<p><em>Input data:</em></p>
<ul class="simple">
<li><p>T1-weighted MRI (T1.nii.gz) (<em>Required for PET image analysis</em>)</p></li>
</ul>
<p>or</p>
<ul class="simple">
<li><p>T2-weighted MRI (T2.nii.gz)</p></li>
</ul>
<p>or</p>
<ul class="simple">
<li><p>FLAIR MRI (FLAIR.nii.gz)</p></li>
</ul>
<div class="admonition-note admonition">
<p class="admonition-title">Note</p>
<p>Analysis of T1-weighted MRI is essential for the analysis of PET images in OPETIA.</p>
</div>
<p><em>Pre-processing steps:</em></p>
<p>All the pre-processing steps are depicted as a flowchart within OPETIA. In brief, the steps include:</p>
<ul class="simple">
<li><p>Skull stripping (brain extraction)</p></li>
<li><p>Segmentation of Gray matter (GM), White matter (WM), and Cerebrospinal fluid (CSF) in the native space.</p></li>
<li><p>Non-linear registration to the MNI-152 template (2x2x2mm voxel size)(12 degrees of freedom followed by &gt;12 degrees of freedom)</p></li>
<li><p>Registration of GM, WM, and CSF to the MNI-152 space using the transformation matrix obtained from the previous step.</p></li>
</ul>
<div class="admonition-note admonition">
<p class="admonition-title">Note</p>
<p>In the <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S1053811925002812">OPETIA paper</a>, registration to the MNI-152 template is done using a linear method. However, this has been changed to non-linear registration in the current version of OPETIA.</p>
</div>
<p><strong>2. Running the Structural image Pre-processing:</strong></p>
<p>From OPETIA, select the <code class="docutils literal notranslate"><span class="pre">MRI</span> <span class="pre">Image</span> <span class="pre">Processing</span></code> tool.</p>
<a class="reference internal image-reference" href="_images/OPETIA_MRI.png"><img alt="Image" class="align-center" src="_images/OPETIA_MRI.png" style="width: 800px;" />
</a>
<br><br><p>All needed to be done is to input the path to the MRI image (data/subject1/T1.nii.gz or T2.nii.gz or Flair.nii.gz) and click on <code class="docutils literal notranslate"><span class="pre">Process</span> <span class="pre">data</span></code>. All the parameters will be set automatically.</p>
<p>A new folder called <code class="docutils literal notranslate"><span class="pre">OPETIA_output</span></code> will be created in the subject folder (data/subject1/OPETIA_output), and all the outputs will be saved there.</p>
<div class="admonition-note admonition">
<p class="admonition-title">Note</p>
<p>The logbox prints the log of the pre-processing. If there are any errors, you can read about them in the Terminal.</p>
</div>
<p><strong>3. Output files:</strong></p>
<p>All the <strong>outputs</strong> will be saved in the folder <code class="docutils literal notranslate"><span class="pre">data/subject1/OPETIA_output</span></code> (automatically created). These include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_brain.nii.gz</span></code>: The skull-stripped T1-weighted MRI image in the native space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_brain_mask.nii.gz</span></code>: The brain mask in the native space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_brain_std.nii.gz</span></code>: The skull-stripped T1-weighted MRI image in the MNI-152 space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_GM_native.nii.gz</span></code>: GM in native space</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_WM_native.nii.gz</span></code>: WM in native space</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_CSF_native.nii.gz</span></code>: CSF in native space</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_GM_MNI.nii.gz</span></code>: GM in MNI space</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_WM_MNI.nii.gz</span></code>: WM in MNI space</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MRI_CSF_MNI.nii.gz</span></code>: CSF in MNI space</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">MRI</span></code> can be <code class="docutils literal notranslate"><span class="pre">t1</span></code>, <code class="docutils literal notranslate"><span class="pre">t2</span></code>, or <code class="docutils literal notranslate"><span class="pre">flair</span></code> depending on your image modality.</p>
<p><strong>4. Quality Control:</strong></p>
<ul class="simple">
<li><p>By pressing the <code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">registration</span> <span class="pre">result</span></code> button, an image will appear containing the MNI-152 template on the background and the pre-processes T1 image as an overlay. The user can visually inspect the quality of the pre-processed image.</p></li>
<li><p>By pressing the <code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">segmentation</span> <span class="pre">result</span></code> button, an image will appear containing the segmented GM, WM, and CSF in different colors. The user can visually inspect the quality of the segmentation.</p></li>
</ul>
<a class="reference internal image-reference" href="_images/MRI_QC_1.png"><img alt="Image" class="align-center" src="_images/MRI_QC_1.png" style="width: 800px;" />
</a>
<br><br><a class="reference internal image-reference" href="_images/MRI_QC_2.png"><img alt="Image" class="align-center" src="_images/MRI_QC_2.png" style="width: 800px;" />
</a>
<br><br><p><strong>5. Advanced Options:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MRI</span> <span class="pre">mage</span> <span class="pre">modality</span></code>: The user can select the MRI modality (T1-weighted, T2-weighted, or FLAIR).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Registration</span> <span class="pre">class</span></code>: Can be <code class="docutils literal notranslate"><span class="pre">Nonlinear</span></code> or <code class="docutils literal notranslate"><span class="pre">Linear</span></code>. Depending on the selection, the <code class="docutils literal notranslate"><span class="pre">registration</span> <span class="pre">type</span></code> will adapt.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Registration</span> <span class="pre">type</span></code>:</p></li>
</ul>
<p><strong>Linear</strong></p>
<ul class="simple">
<li><p><cite>Translation (shifts)</cite>: Aligns images by shifting along x, y, z.</p></li>
<li><p><cite>Rigid-body (rotation + translation)</cite>: Aligns with shifts and rotations, preserving shape.</p></li>
<li><p><cite>Rigid + uniform scaling (Similarity)</cite>: Adds uniform resizing to rigid alignment.</p></li>
<li><p><cite>Affine</cite>: Allows scaling, shearing, rotation, and translation.</p></li>
</ul>
<p><strong>Nonlinear</strong></p>
<ul class="simple">
<li><p><cite>Symmetric normalization (nonlinear warp)</cite>: Flexible nonlinear warp preserving topology.</p></li>
<li><p><cite>Elastic deformation using SyN</cite>: SyN with extra elastic deformation for local flexibility.</p></li>
<li><p><cite>Nonlinear deformation (no affine initialization)</cite>: Pure nonlinear warp without affine pre-alignment.</p></li>
<li><p><cite>SyN using cross-correlation metric</cite>: SyN optimized with cross-correlation similarity metric.</p></li>
<li><p><cite>SyN with rigid + affine initialization</cite>: SyN with rigid and affine initialization steps.</p></li>
<li><p><cite>More aggressive SyN (stronger warps)</cite>: Stronger SyN warps for high deformations.</p></li>
<li><p><cite>SyN optimized for b0-dMRI → T1 registration</cite>: SyN tuned for b0-dMRI to T1 registration.</p></li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dataset.html" class="btn btn-neutral float-left" title="Making the data ready" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="PET.html" class="btn btn-neutral float-right" title="PET Image Analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Taha Parsayan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>